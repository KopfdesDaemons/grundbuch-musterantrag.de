<form [formGroup]="form" (ngSubmit)="createUser()" #ngForm="ngForm">
  @if (error(); as e) {
    <app-error-display [error]="e"></app-error-display>
  }
  <div class="inputfeld-group">
    @if (userroleS.userRoleOptions.isLoading()) {
      <app-progress-spinner [endless]="true"></app-progress-spinner>
    } @else if (userroleS.userRoleOptions.hasValue()) {
      <select formControlName="userRoleID" id="userRoleinput" name="userRole" (change)="userRoleChanged()">
        @for (userRole of userroleS.userRoleOptions.value(); track userRole.userRoleID) {
          <option [value]="userRole.userRoleID">{{ userRole.name }}</option>
        }
      </select>
      @if (selectedUserRoleOption(); as selectedOption) {
        <p class="description">{{ selectedOption.description }}</p>
      }
    }
  </div>

  <div class="inputfeld">
    <input formControlName="username" type="text" id="usernameinput" name="username" required spellcheck="false" placeholder="&nbsp;" />
    <label class="placeholder" for="usernameinput">Username</label>
  </div>

  <div class="inputfeld">
    <input
      formControlName="userPassword"
      autocomplete="new-password"
      type="password"
      id="userPasswordinput"
      name="userPassword"
      required
      spellcheck="false"
      placeholder="&nbsp;"
    />
    <label class="placeholder" for="userPasswordinput">Initialpasswort</label>
  </div>

  <button type="submit" [disabled]="form.invalid">Erstellen</button>
</form>
